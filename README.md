# 每日主题悬浮球应用说明文档

## 1. 项目概述
这是一个基于Python Tkinter开发的桌面悬浮球应用，用于显示每日主题图片。应用会在屏幕边缘显示一个半透明的悬浮按钮，点击后可以查看当天的主题图片。

## 2. 主要功能
- 显示半透明悬浮球
- 自动贴边隐藏
  - 支持完全隐藏（透明度为0）
  - 智能鼠标贴边检测
  - 平滑显示/隐藏动画
- 鼠标拖拽移动
- 显示每日主题图片
  - 支持多图片轮播展示
  - 导航栏快速切换
  - 平滑切换动画效果
- 每日事务管理
  - 添加和管理待办事项
  - 标记任务完成状态
  - 删除已完成任务
  - 查看历史事务记录
- 支持开机自启动

## 3. 代码结构

### 3.1 类结构
```
FloatingBall
├── __init__  # 初始化悬浮球界面
├── 界面交互方法
│   ├── on_click      # 处理鼠标点击
│   ├── on_move       # 处理拖拽移动
│   ├── on_enter      # 处理鼠标进入
│   ├── on_leave      # 处理鼠标离开
│   └── on_release    # 处理鼠标释放
├── 悬浮球显示控制
│   ├── semi_hide_ball  # 半隐藏悬浮球
│   ├── full_hide_ball  # 完全隐藏悬浮球
│   └── show_ball      # 完全显示悬浮球
├── 主题图片显示
│   └── show_theme     # 显示主题图片窗口
├── 事务管理
│   ├── show_task_window   # 显示事务窗口
│   ├── add_task          # 添加新事务
│   ├── update_task_list  # 更新事务列表
│   ├── toggle_task_status # 切换任务状态
│   ├── view_history      # 查看历史事务
│   └── delete_task       # 删除任务
└── 启动项管理
    ├── add_to_startup      # 添加到开机启动
    ├── check_startup_status # 检查启动状态
    └── toggle_startup      # 切换启动状态
```

### 3.2 核心功能说明

#### 3.2.1 悬浮球界面初始化
- 创建透明无边框窗口
- 设置始终置顶
- 初始化在屏幕右侧中间位置
- 绑定鼠标事件处理

#### 3.2.2 自动隐藏机制
- 鼠标离开时自动半隐藏
- 贴边时支持完全隐藏（透明度为0）
- 鼠标进入时完全显示
- 拖拽时保持显示状态
- 平滑的显示/隐藏动画效果

#### 3.2.3 主题图片显示
- 支持按日期显示不同图片
- 自动查找当天日期的图片
- 如无当天图片则显示默认图片
- 自动调整图片大小适应屏幕

#### 3.2.4 事务管理系统
- 支持添加、编辑和删除事务
- 可标记事务完成状态
- 提供历史事务查看功能
- 按日期组织和展示事务
- 直观的任务状态显示

#### 3.2.5 开机启动管理
- 创建快捷方式到启动目录
- 复制必要的图片资源
- 支持开启/关闭开机启动

## 4. 使用说明

### 4.1 基本操作
- 左键点击并拖拽：移动悬浮球位置
- 左键单击：显示/关闭主题图片
- 右键点击：显示菜单（事务管理/开机启动设置/退出）
- 鼠标贴边：悬浮球自动隐藏

### 4.2 图片资源管理
#### 4.2.1 图片存储要求
- 图片存放在daily_images文件夹中
- 图片命名格式：MM-DD.png/jpg（如：01-01.png）
- 默认图片命名：每日主题.png

#### 4.2.2 图片管理器功能
- 自动复制图片到用户数据目录
- 智能选择当前日期对应图片
- 自动调整图片尺寸适应屏幕
- 支持PNG和JPG格式图片
- 内置错误处理和提示机制

#### 4.2.3 图片更新方式
- 直接在daily_images文件夹中添加或替换图片
- 程序会在启动时自动检测并更新图片
- 支持运行时动态更新图片
- 自动备份和同步图片资源

## 5. 注意事项
- 确保daily_images文件夹存在且包含所需图片
- 添加开机启动时需要管理员权限
- 程序打包后需确保图片文件夹正确复制
- 事务数据会自动保存在本地数据库中